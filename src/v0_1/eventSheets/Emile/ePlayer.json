{
	"name": "ePlayer",
	"events": [
		{
			"eventType": "variable",
			"name": "InteractiveUID",
			"type": "number",
			"initialValue": "-1",
			"comment": "UID of the interactive object to focus onto.",
			"isStatic": false,
			"isConstant": false,
			"sid": 267498896551184
		},
		{
			"eventType": "variable",
			"name": "bCanInteract",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 566829066602111
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-playing",
					"objectClass": "tbEntityBase",
					"sid": 491440158163808,
					"behaviorType": "Tween",
					"parameters": {
						"tags": "\"8dir_jump\""
					}
				}
			],
			"actions": [],
			"sid": 316594009749611
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-movement",
					"objectClass": "Mouse",
					"sid": 925704400873429
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 578351875218494,
					"parameters": {
						"variable": "bIs3DView"
					}
				}
			],
			"actions": [
				{
					"id": "rotate-camera",
					"objectClass": "3DCamera",
					"sid": 925925398850305,
					"parameters": {
						"rotate-x": "Mouse.MovementX / 10",
						"rotate-y": "Mouse.MovementY / 10",
						"min-polar-angle": "20",
						"max-polar-angle": "160"
					}
				}
			],
			"sid": 859295498416001
		},
		{
			"functionName": "UpdatePlayerSkeleton",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 348719804163313,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 489316330472184,
							"parameters": {
								"object": "sPlayerSkeleton_Shoulder"
							}
						},
						{
							"id": "pick-parent",
							"objectClass": "sPlayerSkeleton_Shoulder",
							"sid": 187736658241451,
							"parameters": {
								"parent": "sPlayerSkeleton_Head",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "sPlayerSkeleton_Shoulder",
							"sid": 568478290910436,
							"parameters": {
								"x": "sPlayerSkeleton_Head.ImagePointX(sPlayerSkeleton_Shoulder.AnchorName)",
								"y": "sPlayerSkeleton_Head.ImagePointY(sPlayerSkeleton_Shoulder.AnchorName)"
							}
						}
					],
					"sid": 672398291338756
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 577374357047460,
							"parameters": {
								"object": "sPlayerSkeleton_Hindleg"
							}
						},
						{
							"id": "pick-parent",
							"objectClass": "sPlayerSkeleton_Hindleg",
							"sid": 207503278448766,
							"parameters": {
								"parent": "sPlayerSkeleton_Shoulder",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "sPlayerSkeleton_Hindleg",
							"sid": 689747004128729,
							"parameters": {
								"x": "sPlayerSkeleton_Shoulder.ImagePointX(sPlayerSkeleton_Hindleg.AnchorName)",
								"y": "sPlayerSkeleton_Shoulder.ImagePointY(sPlayerSkeleton_Hindleg.AnchorName)"
							}
						}
					],
					"sid": 120853603185174
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 747947459099148,
							"parameters": {
								"object": "sPlayerSkeleton_Foreleg"
							}
						},
						{
							"id": "pick-parent",
							"objectClass": "sPlayerSkeleton_Foreleg",
							"sid": 399369584850741,
							"parameters": {
								"parent": "sPlayerSkeleton_Hindleg",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "sPlayerSkeleton_Foreleg",
							"sid": 709624461853605,
							"parameters": {
								"x": "sPlayerSkeleton_Hindleg.ImagePointX(sPlayerSkeleton_Foreleg.AnchorName)",
								"y": "sPlayerSkeleton_Hindleg.ImagePointY(sPlayerSkeleton_Foreleg.AnchorName)"
							}
						}
					],
					"sid": 766150622907304
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 287920264479925,
							"parameters": {
								"object": "sPlayerSkeleton_Feet"
							}
						},
						{
							"id": "pick-parent",
							"objectClass": "sPlayerSkeleton_Feet",
							"sid": 789344880519313,
							"parameters": {
								"parent": "sPlayerSkeleton_Foreleg",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "sPlayerSkeleton_Feet",
							"sid": 453552794582692,
							"parameters": {
								"x": "sPlayerSkeleton_Foreleg.ImagePointX(sPlayerSkeleton_Feet.AnchorName)",
								"y": "sPlayerSkeleton_Foreleg.ImagePointY(sPlayerSkeleton_Feet.AnchorName)"
							}
						}
					],
					"sid": 169002243393222
				}
			]
		},
		{
			"functionName": "UpdatePlayer",
			"functionDescription": "",
			"functionCategory": "Player",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-comparison",
					"objectClass": "System",
					"sid": 705459161798256,
					"parameters": {
						"object": "tbEntityBase",
						"expression": "tbEntityBase.TemplateName",
						"comparison": 0,
						"value": "\"Player\""
					}
				}
			],
			"actions": [
				{
					"id": "set-position",
					"objectClass": "sCamera",
					"sid": 692421473633357,
					"parameters": {
						"x": "lerp(Self.X, tbEntityBase.X, 0.02)",
						"y": "lerp(Self.Y, tbEntityBase.Y, 0.02)"
					}
				},
				{
					"callFunction": "UpdatePlayerSkeleton",
					"sid": 989932899000537
				}
			],
			"sid": 999520248952580,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 454362203025585,
							"parameters": {
								"variable": "bIs3DView"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 736729151498199,
					"children": [
						{
							"eventType": "comment",
							"text": "Movement"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-at-xy",
									"objectClass": "aMoveKeyMem",
									"sid": 320807521216213,
									"parameters": {
										"x": "0",
										"y": "0",
										"comparison": 0,
										"value": "KEYCODE_UP"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "tbEntityBase",
									"sid": 195102063809488,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "up"
									}
								}
							],
							"sid": 396116149963381,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-at-xy",
											"objectClass": "aMoveKeyMem",
											"sid": 134844359865787,
											"parameters": {
												"x": "1",
												"y": "0",
												"comparison": 0,
												"value": "KEYCODE_LEFT"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "tbEntityBase",
											"sid": 772053826459441,
											"behaviorType": "8Direction",
											"parameters": {
												"control": "left"
											}
										}
									],
									"sid": 991077935983783
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 396817031549008
										},
										{
											"id": "compare-at-xy",
											"objectClass": "aMoveKeyMem",
											"sid": 405824040777514,
											"parameters": {
												"x": "1",
												"y": "0",
												"comparison": 0,
												"value": "KEYCODE_RIGHT"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "tbEntityBase",
											"sid": 109681761635535,
											"behaviorType": "8Direction",
											"parameters": {
												"control": "right"
											}
										}
									],
									"sid": 323867723325236
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 316809416554320
										}
									],
									"actions": [],
									"sid": 475357251622233
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 902531697932493
								},
								{
									"id": "compare-at-xy",
									"objectClass": "aMoveKeyMem",
									"sid": 465176245349264,
									"parameters": {
										"x": "0",
										"y": "0",
										"comparison": 0,
										"value": "KEYCODE_LEFT"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "tbEntityBase",
									"sid": 574730375263207,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "left"
									}
								}
							],
							"sid": 576493268567940,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-at-xy",
											"objectClass": "aMoveKeyMem",
											"sid": 406581472403343,
											"parameters": {
												"x": "1",
												"y": "0",
												"comparison": 0,
												"value": "KEYCODE_UP"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "tbEntityBase",
											"sid": 414617586166709,
											"behaviorType": "8Direction",
											"parameters": {
												"control": "up"
											}
										}
									],
									"sid": 201648380570996
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 188428812442725
										},
										{
											"id": "compare-at-xy",
											"objectClass": "aMoveKeyMem",
											"sid": 975153754658435,
											"parameters": {
												"x": "1",
												"y": "0",
												"comparison": 0,
												"value": "KEYCODE_DOWN"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "tbEntityBase",
											"sid": 245621033893889,
											"behaviorType": "8Direction",
											"parameters": {
												"control": "down"
											}
										}
									],
									"sid": 881056567081905
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 517360075703223
										}
									],
									"actions": [],
									"sid": 746491004441006
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 984045639274583
								},
								{
									"id": "compare-at-xy",
									"objectClass": "aMoveKeyMem",
									"sid": 869959463296482,
									"parameters": {
										"x": "0",
										"y": "0",
										"comparison": 0,
										"value": "KEYCODE_DOWN"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "tbEntityBase",
									"sid": 847983218453112,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "down"
									}
								}
							],
							"sid": 812858018336271,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-at-xy",
											"objectClass": "aMoveKeyMem",
											"sid": 920531532699468,
											"parameters": {
												"x": "1",
												"y": "0",
												"comparison": 0,
												"value": "KEYCODE_LEFT"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "tbEntityBase",
											"sid": 936312247257912,
											"behaviorType": "8Direction",
											"parameters": {
												"control": "left"
											}
										}
									],
									"sid": 855029580974313
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 646927514487636
										},
										{
											"id": "compare-at-xy",
											"objectClass": "aMoveKeyMem",
											"sid": 244885674850970,
											"parameters": {
												"x": "1",
												"y": "0",
												"comparison": 0,
												"value": "KEYCODE_RIGHT"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "tbEntityBase",
											"sid": 575010624433002,
											"behaviorType": "8Direction",
											"parameters": {
												"control": "right"
											}
										}
									],
									"sid": 264402877280065
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 617953870480562
										}
									],
									"actions": [],
									"sid": 219001251868550
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 958182577093904
								},
								{
									"id": "compare-at-xy",
									"objectClass": "aMoveKeyMem",
									"sid": 560988786204620,
									"parameters": {
										"x": "0",
										"y": "0",
										"comparison": 0,
										"value": "KEYCODE_RIGHT"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "tbEntityBase",
									"sid": 252478914078847,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "right"
									}
								}
							],
							"sid": 570379240448480,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-at-xy",
											"objectClass": "aMoveKeyMem",
											"sid": 627448870684717,
											"parameters": {
												"x": "1",
												"y": "0",
												"comparison": 0,
												"value": "KEYCODE_UP"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "tbEntityBase",
											"sid": 942596804951881,
											"behaviorType": "8Direction",
											"parameters": {
												"control": "up"
											}
										}
									],
									"sid": 573818566916845
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 652962884449550
										},
										{
											"id": "compare-at-xy",
											"objectClass": "aMoveKeyMem",
											"sid": 767104548306247,
											"parameters": {
												"x": "1",
												"y": "0",
												"comparison": 0,
												"value": "KEYCODE_DOWN"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "tbEntityBase",
											"sid": 560365317618344,
											"behaviorType": "8Direction",
											"parameters": {
												"control": "down"
											}
										}
									],
									"sid": 883521908498806
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 729654667266791
										}
									],
									"actions": [],
									"sid": 193339564647957
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Movement"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 755497493797575,
									"parameters": {
										"first-value": "Functions.IsMarkedPressed(KEYCODE_SPACE)",
										"comparison": 0,
										"second-value": "TRUE"
									}
								},
								{
									"id": "is-playing",
									"objectClass": "tbEntityBase",
									"sid": 308215373799293,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"8dir_jump\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "tween-value",
									"objectClass": "tbEntityBase",
									"sid": 508680286472663,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"8dir_jump\"",
										"start-value": "0",
										"end-value": "30",
										"time": ".5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"callFunction": "MarkReleased",
									"sid": 893842663166719,
									"parameters": [
										"KEYCODE_SPACE"
									]
								}
							],
							"sid": 772826724442941
						},
						{
							"eventType": "comment",
							"text": ""
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 653882928503741,
									"parameters": {
										"first-value": "Functions.IsMarkedPressed(KEYCODE_E)",
										"comparison": 0,
										"second-value": "TRUE"
									}
								}
							],
							"actions": [],
							"sid": 544506816557966,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 107823230129500,
											"parameters": {
												"variable": "bCanInteract"
											}
										}
									],
									"actions": [
										{
											"callFunction": "MarkReleased",
											"sid": 687306498764920,
											"parameters": [
												"KEYCODE_E"
											]
										},
										{
											"callFunction": "ToggleDialogBox",
											"sid": 727489572427982
										},
										{
											"type": "comment",
											"text": "Old: enter 3d"
										},
										{
											"id": "look-parallel-to-layout",
											"objectClass": "3DCamera",
											"sid": 142155246490434,
											"disabled": true,
											"parameters": {
												"cam-x": "0",
												"cam-y": "0",
												"cam-z": "10",
												"look-angle": "0"
											}
										},
										{
											"id": "set-position",
											"objectClass": "3DCamera",
											"sid": 410021483475383,
											"disabled": true,
											"parameters": {
												"x": "tbEntityBase.X",
												"y": "tbEntityBase.Y",
												"z": "32",
												"which": "camera"
											}
										},
										{
											"id": "set-position",
											"objectClass": "3DCamera",
											"sid": 925614004551785,
											"disabled": true,
											"parameters": {
												"x": "sClue.X",
												"y": "sClue.Y",
												"z": "0",
												"which": "look"
											}
										},
										{
											"id": "request-pointer-lock",
											"objectClass": "Mouse",
											"sid": 697033049274649,
											"disabled": true
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 802762450162074,
											"disabled": true,
											"parameters": {
												"variable": "bIs3DView",
												"value": "true"
											}
										}
									],
									"sid": 878661143229174,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-unique-id",
													"objectClass": "tbfDialogOwner",
													"sid": 787551000302335,
													"parameters": {
														"unique-id": "InteractiveUID"
													}
												}
											],
											"actions": [
												{
													"callFunction": "PullDialogText",
													"sid": 509330826214056,
													"parameters": [
														"tbfDialogOwner.UID"
													]
												}
											],
											"sid": 215466796041145
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 790965011291774,
									"parameters": {
										"variable": "bCanInteract",
										"value": "false"
									}
								}
							],
							"sid": 667264857703732
						},
						{
							"eventType": "variable",
							"name": "bMatchFound",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 153439144716628
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 254555283393751,
									"parameters": {
										"variable": "InteractiveUID",
										"value": "-1"
									}
								}
							],
							"sid": 288763196243909
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 456643249115634,
									"parameters": {
										"object": "gInteractive"
									}
								}
							],
							"actions": [],
							"sid": 814590459727338,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-los-to-object",
											"objectClass": "tbEntityBase",
											"sid": 742238320467390,
											"behaviorType": "LineOfSight",
											"parameters": {
												"object": "gInteractive",
												"image-point": "0"
											}
										}
									],
									"actions": [],
									"sid": 132530100939638,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 484386486320482,
													"parameters": {
														"first-value": "gInteractive.UID",
														"comparison": 1,
														"second-value": "tbEntityBase.UID"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 419276343138121,
													"parameters": {
														"variable": "bCanInteract",
														"value": "true"
													}
												},
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 754252823124893,
													"parameters": {
														"variable": "bMatchFound",
														"value": "true"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 701670338342907,
													"parameters": {
														"variable": "InteractiveUID",
														"value": "gInteractive.UID"
													}
												},
												{
													"id": "stop-loop",
													"objectClass": "System",
													"sid": 151878709251580
												}
											],
											"sid": 415973019907125
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 791617781788879,
									"parameters": {
										"variable": "bMatchFound"
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 708524828187716,
									"parameters": {
										"variable": "bIsDialogMode"
									}
								}
							],
							"actions": [
								{
									"callFunction": "HideDialogBox",
									"sid": 127215430469367
								}
							],
							"sid": 316327433181305
						}
					]
				}
			]
		}
	],
	"sid": 373529578703370
}